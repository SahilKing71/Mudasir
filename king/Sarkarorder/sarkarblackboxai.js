function _0x1bab(){const _0x5a5e1b=['Error\x20deleting\x20chat\x20history:','stringify','url','sendMessage','programmer','https://api.siputzx.my.id/api/ai/teachanything?content=','json','1172937sGNkmI','5909796vstYjF','2337952DDSOvr','body','\x20can\x20you\x20create\x20a\x20login\x20page\x20in\x20HTML.*','14MOruCf','error','API','7655805AsdrgR','Error\x20writing\x20chat\x20history:','toLowerCase','shift','writeFile','31190600HVPpit','trim','The\x20AI\x20service\x20is\x20currently\x20unavailable.\x20Please\x20try\x20again\x20later.','36FesDax','length','sender','*EXAMPLE:\x20','utf-8','readFile','PREFIX','An\x20unexpected\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','../blackboxhistory.json','API\x20returned\x20status\x20','*Processing\x20your\x20code,\x20please\x20wait...*','Failed\x20to\x20delete\x20chat\x20history.\x20Please\x20try\x20again\x20later.','status','User','pathname','7849198JgZfJW','user','126012kivGZc','slice','coder','data','text','parse','4vimsvd','split','from','includes','Error\x20updating\x20chat\x20history:'];_0x1bab=function(){return _0x5a5e1b;};return _0x1bab();}const _0x930548=_0x1a82;(function(_0x481d09,_0xba9cc6){const _0x7dcc90=_0x1a82,_0x21f5ef=_0x481d09();while(!![]){try{const _0x33d917=-parseInt(_0x7dcc90(0xc2))/0x1*(-parseInt(_0x7dcc90(0xab))/0x2)+parseInt(_0x7dcc90(0xbd))/0x3*(-parseInt(_0x7dcc90(0xb1))/0x4)+-parseInt(_0x7dcc90(0xc5))/0x5+parseInt(_0x7dcc90(0xbe))/0x6+-parseInt(_0x7dcc90(0xa9))/0x7+parseInt(_0x7dcc90(0xbf))/0x8*(-parseInt(_0x7dcc90(0xcd))/0x9)+parseInt(_0x7dcc90(0xca))/0xa;if(_0x33d917===_0xba9cc6)break;else _0x21f5ef['push'](_0x21f5ef['shift']());}catch(_0x1d9902){_0x21f5ef['push'](_0x21f5ef['shift']());}}}(_0x1bab,0xbce30));import{promises as _0x314321}from'fs';import _0x2e7f9a from'path';import _0x35d41b from'node-fetch';import _0x56301b from'../../config.cjs';const __filename=new URL(import.meta[_0x930548(0xb8)])[_0x930548(0xa8)],__dirname=_0x2e7f9a['dirname'](__filename),chatHistoryFile=_0x2e7f9a['resolve'](__dirname,_0x930548(0xd5));async function readChatHistoryFromFile(){const _0x403bfb=_0x930548;try{const _0x68e9f6=await _0x314321[_0x403bfb(0xd2)](chatHistoryFile,_0x403bfb(0xd1));return JSON[_0x403bfb(0xb0)](_0x68e9f6);}catch{return{};}}function _0x1a82(_0x1a3e34,_0x13c1fe){const _0x1babc6=_0x1bab();return _0x1a82=function(_0x1a8201,_0x29e33b){_0x1a8201=_0x1a8201-0xa4;let _0x3fdc92=_0x1babc6[_0x1a8201];return _0x3fdc92;},_0x1a82(_0x1a3e34,_0x13c1fe);}async function writeChatHistoryToFile(_0x278f76){const _0x232c22=_0x930548;try{await _0x314321[_0x232c22(0xc9)](chatHistoryFile,JSON[_0x232c22(0xb7)](_0x278f76,null,0x2));}catch(_0x384c47){console[_0x232c22(0xc3)](_0x232c22(0xc6),_0x384c47);}}async function deleteChatHistory(_0x23dc80,_0x15b5ca){const _0x55afde=_0x930548;try{delete _0x23dc80[_0x15b5ca],await writeChatHistoryToFile(_0x23dc80);}catch(_0x3822d0){console[_0x55afde(0xc3)](_0x55afde(0xb6),_0x3822d0);}}async function updateChatHistory(_0x3efc34,_0x4520ff,_0xddc416){const _0x4acf2e=_0x930548;try{!_0x3efc34[_0x4520ff]&&(_0x3efc34[_0x4520ff]=[]),_0x3efc34[_0x4520ff]['push'](_0xddc416),_0x3efc34[_0x4520ff][_0x4acf2e(0xce)]>0x14&&_0x3efc34[_0x4520ff][_0x4acf2e(0xc8)](),await writeChatHistoryToFile(_0x3efc34);}catch(_0x21aa50){console[_0x4acf2e(0xc3)](_0x4acf2e(0xb5),_0x21aa50);}}const mistral=async(_0x56d763,_0x4ec89f)=>{const _0x56dfd6=_0x930548,_0x58628e=await readChatHistoryFromFile(),_0x17e2af=_0x56d763[_0x56dfd6(0xc0)][_0x56dfd6(0xcb)]();if(_0x17e2af==='/forget'){try{await deleteChatHistory(_0x58628e,_0x56d763[_0x56dfd6(0xcf)]),await _0x4ec89f[_0x56dfd6(0xb9)](_0x56d763[_0x56dfd6(0xb3)],{'text':'Chat\x20history\x20deleted\x20successfully.'},{'quoted':_0x56d763});}catch(_0x59f071){console['error'](_0x56dfd6(0xb6),_0x59f071),await _0x4ec89f['sendMessage'](_0x56d763[_0x56dfd6(0xb3)],{'text':_0x56dfd6(0xa5)},{'quoted':_0x56d763});}return;}const _0x552c83=_0x56301b[_0x56dfd6(0xd3)];if(!_0x17e2af['startsWith'](_0x552c83))return;const _0x238bfc=_0x17e2af['slice'](_0x552c83[_0x56dfd6(0xce)])[_0x56dfd6(0xb2)]('\x20')[0x0][_0x56dfd6(0xc7)](),_0x4a029f=_0x17e2af[_0x56dfd6(0xac)](_0x552c83[_0x56dfd6(0xce)]+_0x238bfc[_0x56dfd6(0xce)])['trim'](),_0x5a7a09=['blackbox','code',_0x56dfd6(0xad)];if(!_0x5a7a09[_0x56dfd6(0xb4)](_0x238bfc))return;if(!_0x4a029f){await _0x4ec89f[_0x56dfd6(0xb9)](_0x56d763[_0x56dfd6(0xb3)],{'text':_0x56dfd6(0xd0)+_0x552c83+_0x238bfc+_0x56dfd6(0xc1)},{'quoted':_0x56d763});return;}try{const _0x3945c1=_0x56dfd6(0xa4);await _0x4ec89f[_0x56dfd6(0xb9)](_0x56d763[_0x56dfd6(0xb3)],{'text':_0x3945c1},{'quoted':_0x56d763});const _0x353a38=_0x56dfd6(0xbb)+encodeURIComponent(_0x4a029f),_0x51b8f6=await _0x35d41b(_0x353a38);if(!_0x51b8f6['ok']){const _0x585946=await _0x51b8f6[_0x56dfd6(0xaf)]();throw new Error(_0x56dfd6(0xd6)+_0x51b8f6[_0x56dfd6(0xa6)]+':\x20'+_0x585946);}const _0x549758=await _0x51b8f6[_0x56dfd6(0xbc)]();console['log']('API\x20Response:',_0x549758);const _0x4b5961=_0x549758?.[_0x56dfd6(0xae)];if(!_0x4b5961)throw new Error('Invalid\x20API\x20response\x20structure');await updateChatHistory(_0x58628e,_0x56d763[_0x56dfd6(0xcf)],{'role':_0x56dfd6(0xaa),'content':_0x4a029f}),await updateChatHistory(_0x58628e,_0x56d763['sender'],{'role':_0x56dfd6(0xba),'content':_0x4b5961});const _0x5bfc22=_0x56d763['pushName']||_0x56dfd6(0xa7),_0x2454a3='Here\x27s\x20your\x20code,\x20'+_0x5bfc22+':\x0a\x0a'+_0x4b5961;await _0x4ec89f[_0x56dfd6(0xb9)](_0x56d763['from'],{'text':_0x2454a3},{'quoted':_0x56d763});}catch(_0x75a028){console[_0x56dfd6(0xc3)]('Error\x20processing\x20request:',_0x75a028);const _0x24cf20=_0x75a028['message'][_0x56dfd6(0xb4)](_0x56dfd6(0xc4))?_0x56dfd6(0xcc):_0x56dfd6(0xd4);await _0x4ec89f[_0x56dfd6(0xb9)](_0x56d763[_0x56dfd6(0xb3)],{'text':_0x24cf20},{'quoted':_0x56d763});}};export default mistral;
